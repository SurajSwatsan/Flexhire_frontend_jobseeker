<div class="p-fluid">
  <h2>Forgot Password</h2>
  
  <form [formGroup]="forgotPasswordForm" (ngSubmit)="sendOtp()">
    
    <div class="p-field">
      <label for="email">Email</label>
      <input id="email" type="email" pInputText formControlName="email" />
      <div *ngIf="forgotPasswordForm.get('email')?.invalid && 
                   (forgotPasswordForm.get('email')?.dirty || 
                    forgotPasswordForm.get('email')?.touched)">
        <small *ngIf="forgotPasswordForm.get('email')?.errors?.['required']">Email is required.</small>
        <small *ngIf="forgotPasswordForm.get('email')?.errors?.['email']">Invalid email format.</small>
      </div>
    </div>

    <button pButton type="submit" label="Send OTP"></button>
  </form>

  <div *ngIf="otpSent">
    <form [formGroup]="forgotPasswordForm" (ngSubmit)="resetPassword()">
      <div class="p-field">
        <label for="otp">OTP</label>
        <input id="otp" type="text" pInputText formControlName="otp" />
      </div>

      <div class="p-field">
        <label for="password">New Password</label>
        <input id="password" type="password" pInputText formControlName="password" />
        <div *ngIf="forgotPasswordForm.get('password')?.invalid && 
                     (forgotPasswordForm.get('password')?.dirty || 
                      forgotPasswordForm.get('password')?.touched)">
          <small *ngIf="forgotPasswordForm.get('password')?.errors?.['required']">Password is required.</small>
          <small *ngIf="forgotPasswordForm.get('password')?.errors?.['minlength']">
            Password must be at least 6 characters long.
          </small>
        </div>
      </div>

      <button pButton type="submit" label="Reset Password"></button>
    </form>
  </div>
</div>
